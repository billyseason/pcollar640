

//const unsigned char c_cmt_init[0x60]={
//							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
//							 0xae,0xe0,0x70,0x00,0x00,0xf4,0x10,0xe2,0x42,0x20,0x00,0x81,	//System Bank
//							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
//							 0x32,0x18,0x00,0x99,0xC1,0x9B,0x06,0x0a,0x9F,0x39,0x29,0x29,0xC0,0x51,0x2A,0x53,0x00,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
//							 0x12,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
//							 0x50,0x26,0x03,0x00,0x42,0xB0,0x00,0x01,0x01,0x3F,	//Reserve Bank
//							 0x7F,												//LBD Bank	
//							 };


//const unsigned char c_cmt_init[0x60]={
//							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
//							 0xae,0xfa,0x70,0x3f,0x10,0xf4,0x10,0xe2,0x42,0x20,0x20,0x81,	//System Bank
//							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
//							 0x32,0x18,0x00,0x99,0xC1,0x9B,0x06,0x0a,0x9F,0x39,0x29,0x29,0xC0,0x51,0x2A,0x53,0x00,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
//							 0x22,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
//							 0x50,0x26,0x03,0x00,0x42,0xB0,0x00,0x01,0x01,0x3F,	//Reserve Bank
//							 0x7F,												//LBD Bank	
//							 };

//const unsigned char c_cmt_init[0x60]={
//							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
//							 0xae,0xfa,0x50,0x50,0x52,0xfa,0x00,0xa8,0x44,0x2d,0x40,0x01,	//System Bank
//							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
//							 0x32,0x18,0x00,0x99,0xC1,0x9B,0x06,0x0a,0x9F,0x39,0x29,0x29,0xC0,0x51,0x2A,0x53,0x00,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
//							 0x12,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
//							 0x50,0x26,0x03,0x00,0x42,0xB0,0x00,0x01,0x01,0x3F,	//Reserve Bank
//							 0x7F,												//LBD Bank	
//							 };

//const unsigned char c_cmt_init[0x60]={
//							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
//							 0xae,0xfa,0x50,0x50,0x52,0xfa,0x00,0xa8,0x44,0x2d,0x40,0x01,	//System Bank
//							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
//							 0x32,0x18,0x00,0x99,0xC1,0x9B,0x06,0x0a,0x9F,0x39,0x29,0x29,0xC0,0x51,0x2A,0x53,0x00,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
//							 0x12,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
//							 0x50,0x26,0x03,0x00,0x42,0xB0,0x00,0x01,0x01,0x3F,	//Reserve Bank
//							 0x7F,												//LBD Bank	
//							 };//0x8D04   T1=10ms,T2=763ms,Sleep=340ms,mode13,PJD+RSSI

//const unsigned char c_cmt_init[0x60]={
//							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
//							 0xae,0xe2,0x50,0x00,0x00,0xf4,0x10,0xe2,0x42,0x2d,0x40,0x01,	//System Bank
//							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
//							 0x32,0x18,0x00,0x99,0xC1,0x9B,0x06,0x0a,0x9F,0x39,0x29,0x29,0xC0,0x51,0x2A,0x53,0x00,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
//							 0x12,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
//							 0x50,0x26,0x03,0x00,0x42,0xB0,0x00,0x01,0x01,0x3F,	//Reserve Bank
//							 0x7F,												//LBD Bank	
//							 };//0x8D04   timer_off,

//const unsigned char c_cmt_init[0x60]={
//							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
//							 0xae,0xfa,0x50,0x50,0x52,0xfa,0x00,0xa8,0x44,0x2b,0x00,0x01,	//System Bank
//							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
//							 0x32,0x18,0x00,0x99,0xC1,0x9B,0x06,0x0a,0x9F,0x39,0x29,0x29,0xC0,0x51,0x2A,0x53,0x00,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
//							 0x12,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
//							 0x50,0x26,0x03,0x00,0x42,0xB0,0x00,0x01,0x01,0x3F,	//Reserve Bank
//							 0x7F,												//LBD Bank	
//							 };//0x8D04   T1=10ms,T2=763ms,Sleep=340ms,mode11,PJD

//const unsigned char c_cmt_init[0x60]={
//							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
//							 0xae,0xfa,0x40,0x50,0x52,0xfa,0x00,0xa8,0x44,0x2b,0x00,0x01,	//System Bank
//							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
//							 0xca,0x60,0x00,0x33,0xC9,0x36,0x06,0x0a,0x9F,0x38,0x29,0x29,0xC0,0x94,0x0a,0x53,0x08,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
//							 0x0a,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
//							 0x50,0x26,0x03,0x00,0x0f,0x90,0x00,0x01,0x01,0x3F,	//Reserve Bank
//							 0x7F,												//LBD Bank	
//							 };//0x370B   T1=10ms,T2=763ms,Sleep=340ms,mode11,PJD,9.6kbps

//const unsigned char c_cmt_init[0x60]={
//							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
//							 0xae,0xe0,0x40,0x00,0x00,0xf4,0x10,0xe2,0x42,0x20,0x00,0x01,	//System Bank
//							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
//							 0xca,0x60,0x00,0x33,0xC9,0x36,0x06,0x0a,0x9F,0x38,0x29,0x29,0xC0,0x94,0x0a,0x53,0x08,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
//							 0x12,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
//							 0x50,0x26,0x03,0x00,0x0f,0x90,0x00,0x01,0x01,0x3F,	//Reserve Bank
//							 0x7F,												//LBD Bank	
//							 };//0x0E49  no_sleep
#if 0
const unsigned char c_cmt_init[0x60]={
							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
							 0xae,0xfa,0x50,0x40,0x51,0x4b,0x00,0x65,0x42,0x2d,0x00,0x01,	//System Bank
							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
							 0xca,0x60,0x10,0x33,0xe1,0x36,0x18,0x0a,0x9F,0x38,0x29,0x29,0xC0,0x94,0x0a,0x53,0x08,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
							 0x12,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
							 0x50,0x19,0x0c,0x00,0x0f,0x90,0x00,0x01,0x01,0x3F,	//Reserve Bank
							 0x7F,												//LBD Bank	
							 };//0xFAED  rx-2
#else
const unsigned char c_cmt_init[0x60]={
							 0x02,0x66,0xec,0x1c,0xf0,0x80,0x14,0x08,0x91,0x02,0x02,0xd0,	//CMT Bank
							 0xae,0xfa,0x50,0x40,0x51,0x4B,0x00,0x65,0x42,0x2D,0x40,0x01,	//System Bank
							 0x42,0x71,0xCE,0x1C,0x42,0x5B,0x1C,0x1C,						//Freq Bank
							 0xCA,0x60,0x10,0x33,0xE1,0x36,0x18,0x0a,0x9F,0x38,0x29,0x29,0xC0,0x94,0x0A,0x53,0x08,0x00,0xB4,0x00,0x00,0x01,0x00,0x00,	//Data Rate Bank
							 0x12,0x08,0x00,0xAA,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x2D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xFF,0x01,0x00,0x1F,0x10, //Baseband
							 0x50,0x19,0x0C,0x00,0x0F,0x90,0x00,0x01,0x01,0x3F,	//Reserve Bank
							 0x7F,												//LBD Bank	
							 };//0x8D04   NORMAL:T1=3ms,T2=180ms,Sleep=168ms,mode13,PJD+RSSI
#endif


#define IC_DATA     _pa0
#define ON_OFF	    _pa1
#define IC_CLK	    _pa2
#define CHRG	    _pa3
#define RF_INT	    _pa4
#define SCLK	    _pa5
#define SDIO	    _pa6
#define CSB		    _pa7

#define MOTOR_EN	_pb0
#define BZ		    _pb1
#define BAT_DET     _pb2
#define FCSB	    _pb3
#define GREEN_LED	_pb4
#define CHRG_PU     _pb5
#define RED_LED     _pb6

#define HV_EN       _pc0
#define RST	        _pc2

#define IC_DATAC 	_pac0
#define ON_OFFC		_pac1
#define IC_CLKC		_pac2
#define CHRGC		_pac3
#define RF_INTC	    _pac4
#define SCLKC	    _pac5
#define SDIOC	    _pac6
#define CSBC	    _pac7

#define MOTOR_ENC   _pbc0
#define BZC			_pbc1
#define BAT_DETC    _pbc2
#define FCSBC	    _pbc3
#define GREEN_LEDC	_pbc4
#define CHRG_PUC    _pbc5
#define RED_LEDC 	_pbc6

#define HV_ENC 		_pcc0
#define RSTC		_pcc2

#define ON_OFFUP    _papu1
#define RF_INTUP    _papu4
#define CHRG_PUUP   _pbpu5

#define CHRGWU      _pawu3
#define RF_INTWU    _pawu4


typedef struct 
{
	unsigned char f_bz			:1 ;
	unsigned char f_k2			:1 ;
	unsigned char f_k3			:1 ;
	unsigned char f_k4			:1 ;
	unsigned char f_k5			:1 ;
	unsigned char f_k1_buf		:1 ;
	unsigned char f_k2_buf		:1 ;
	unsigned char f_k3_buf		:1 ;
	unsigned char f_k4_buf		:1 ;
	unsigned char f_k5_buf		:1 ;
	unsigned char f_10ms		:1 ;
	unsigned char f_tx			:1 ;
	unsigned char f_halt		:1 ;
    unsigned char f_onoff       :1 ;
    unsigned char f_onoff_buf   :1 ;
    unsigned char f_vibra       :1 ;
    unsigned char f_stim        :1 ;

    unsigned char f_dc_connect  :1 ;
	
	unsigned char f_voltage_buf0	:1 ;
	unsigned char f_voltage_buf1	:1 ;
	unsigned char f_voltage_buf2	:1 ;
	unsigned char f_voltage_buf3	:1 ;
	unsigned char f_voltage_500ms	:1 ;
	
}flag_byte;
//flag_byte f_lcd;

#define  f_bz	 	   	f_flag.f_bz
#define  f_k2	 	   	f_flag.f_k2
#define  f_k3	 	   	f_flag.f_k3
#define  f_k4	 	   	f_flag.f_k4
#define  f_k5	 	   	f_flag.f_k5
#define  f_k1_buf 	   	f_flag.f_k1_buf
#define  f_k2_buf 	   	f_flag.f_k2_buf
#define  f_k3_buf 	   	f_flag.f_k3_buf
#define  f_k4_buf 	   	f_flag.f_k4_buf
#define  f_k5_buf 	   	f_flag.f_k5_buf
#define  f_10ms 	   	f_flag.f_10ms
#define  f_tx	 	   	f_flag.f_tx
#define  f_halt	 	   	f_flag.f_halt
#define  f_onoff        f_flag.f_onoff
#define  f_onoff_buf    f_flag.f_onoff_buf
#define  f_vibra        f_flag.f_vibra
#define  f_stim         f_flag.f_stim
#define  f_dc_connect   f_flag.f_dc_connect

#define  f_voltage_buf0		f_flag.f_voltage_buf0
#define  f_voltage_buf1		f_flag.f_voltage_buf1
#define  f_voltage_buf2		f_flag.f_voltage_buf2
#define  f_voltage_buf3		f_flag.f_voltage_buf3
#define  f_voltage_500ms   	f_flag.f_voltage_500ms



